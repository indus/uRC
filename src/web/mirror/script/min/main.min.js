angular.module("urcMirror",[]).run(function(n){n.safeApply=function(n){var e=this.$root.$$phase;"$apply"==e||"$digest"==e?n&&"function"==typeof n&&n():this.$apply(n)};var e="ws://127.0.0.1:8080/ws",o=new autobahn.Connection({url:e,realm:"realm1"});o.onopen=function(e){n.session=e,n.connection=o,n.$broadcast("connected"),e.register("mirror."+e.id,function(){return{id:e.id,module:"web",name:document.title,registrations:_.reduce(e.registrations,function(n,e){return n[e.procedure]=_.pick(e,"id","procedure","active"),n},{}),subscriptions:_.reduce(_.flatten(e.subscriptions),function(n,e){return n[e.topic]=_.pick(e,"id","topic","active"),n},{})}}).then(function(){e.call("mirror",[e.id]).then(function(){e.call("mirror.reflection",[]).then(function(e){console.log(e),n.reflections=e,n.safeApply()})})})},o.open()}).controller("mainCTRL",function(){});